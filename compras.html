        function renderProperties() {
            const grid = document.getElementById('propertiesGrid');
            const resultsCount = document.getElementById('resultsCount');

            if (allProperties.length === 0) {
                grid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem;">
                        <h3>No hay propiedades en venta disponibles</h3>
                        <p>Intenta nuevamente más tarde</p>
                        <button class="btn btn-primary" onclick="location.reload()">🔄 Recargar</button>
                    </div>
                `;
                resultsCount.textContent = 'No se encontraron propiedades';
                return;
            }

            // Renderizar propiedades con efecto hover premium y click para detalles
            const propertiesHTML = allProperties.map(property => {
                const formattedPrice = formatPrice(property.price, property.currency);
                const features = [];
                
                if (property.bedrooms !== null && property.bedrooms !== undefined) {
                    features.push(`${property.bedrooms === 0 ? 'Studio' : property.bedrooms + ' dormitorios'}`);
                }
                if (property.bathrooms) features.push(`${property.bathrooms} baños`);
                if (property.total_area) features.push(`${property.total_area}m²`);
                if (property.parking_spaces > 0) features.push(`${property.parking_spaces} estacionamientos`);

                const contactInfo = property.contact_phone || property.contact_email || 'Contactar para más información';
                const badgeText = 'VENTA';

                return `
                    <div class="property-card" data-id="${property.id}" onclick="viewPropertyDetails('${property.id}')">
                        <div class="property-image" style="background-image: url('${property.main_image || 'https://images.unsplash.com/photo-1568605114967-8130f3a36994?w=800&h=600&fit=crop'}');">
                            <div class="property-badge ${property.featured ? 'featured' : ''}">
                                ${property.featured ? '⭐ ' : ''}${badgeText}
                            </div>
                            
                            <!-- Información adicional que aparece en hover -->
                            <div class="property-hover-info">
                                <h4>${property.title}</h4>
                                <div class="hover-price">${formattedPrice}</div>
                                <p>📍 ${property.address}, ${property.commune}</p>
                                <div class="hover-features">${features.join(' • ')}</div>
                                ${property.expenses ? 
                                    `<p>💰 Gastos comunes: $${new Intl.NumberFormat('es-CL').format(property.expenses)}</p>` : 
                                    ''
                                }
                                <div class="hover-contact">📞 ${contactInfo}</div>
                                <button class="view-details-btn" onclick="event.stopPropagation(); viewPropertyDetails('${property.id}')">
                                    Ver Detalles
                                </button>
                            </div>
                        </div>
                        
                        <div class="property-info">
                            <div class="property-price">${formattedPrice}</div>
                            <h3 class="property-title">${property.title}</h3>
                            <div class="property-location">
                                📍 ${property.commune}${property.neighborhood ? ', ' + property.neighborhood : ''}
                            </div>
                            <div class="property-features">
                                ${features.join(' • ')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            grid.innerHTML = propertiesHTML;
            resultsCount.textContent = `Mostrando ${allProperties.length} propiedades en venta`;

            // Mostrar la sección de propiedades
            document.getElementById('propertiesSection').style.display = 'block';
        }

        // Función para ver detalles de propiedad
        window.viewPropertyDetails = function(propertyId) {
            window.location.href = `property-detail.html?id=${propertyId}`;
        };

        // Función de contacto (mantener para compatibilidad)
        window.contactProperty = function(propertyId) {
            const property = allProperties.find(p => p.id === propertyId);
            if (!property) {
                alert('Propiedad no encontrada');
                return;
            }

            const features = [];
            if (property.bedrooms !== null && property.bedrooms !== undefined) {
                features.push(`${property.bedrooms === 0 ? 'Studio' : property.bedrooms + ' dormitorios'}`);
            }
            if (property.bathrooms) features.push(`${property.bathrooms} baños`);
            if (property.total_area) features.push(`${property.total_area}m²`);
            if (property.parking_spaces > 0) features.push(`${property.parking_spaces} estacionamientos`);

            const message = `Hola! Estoy interesado/a en comprar la propiedad "${property.title}" ubicada en ${property.commune}.

📍 Dirección: ${property.address}
💰 Precio: ${formatPrice(property.price, property.currency)}
🏠 ${features.join(', ')}
${property.expenses ? `💸 Gastos comunes: $${property.expenses.toLocaleString()}` : ''}

¿Podrías darme más información?`;

            // Limpiar número de teléfono
            const phoneNumber = property.contact_phone.replace(/[^0-9]/g, '');
            const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            
            console.log('📱 Abriendo WhatsApp para propiedad:', property.title);
            window.open(whatsappURL, '_blank');
        };