<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casa Nuvera | Innovando el sector Inmobiliario | EST. 2025</title>
    <link rel="stylesheet" href="property-styles.css">
    <!-- 🚨 REMOVIDO: css/property-grid-dark.css - CAUSA FONDO NEGRO -->
    <link rel="stylesheet" href="css/property-featured-styles.css">
    <!-- 🚀 Widget WhatsApp -->
    <link rel="stylesheet" href="whatsapp-widget.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* 🚨 OVERRIDE COMPLETO PARA FONDO BLANCO FORZADO */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-black: #0a0a0a;
            --secondary-gray: #666666;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --white: #ffffff;
            --accent-black: #333333;
            --text-muted: #999999;
            --border-color: #ddd;
            --overlay-dark: rgba(0, 0, 0, 0.6);
            --overlay-medium: rgba(0, 0, 0, 0.4);
            --overlay-light: rgba(0, 0, 0, 0.2);
            --overlay-nav: rgba(0, 0, 0, 0.1);
            --overlay-white: rgba(255, 255, 255, 0.9);
            
            /* Esquema negro minimalista */
            --elegant-black: #333333;
            --warm-black: #000000;
            --charcoal: #36454F;
            --light-gray-accent: #D3D3D3;
            --dark-gray: #2F2F2F;
        }

        /* Toggle de navegación (oculto por defecto en desktop) */
        .nav-toggle { display: none; }

        /* 🚨 BODY CON FONDO BLANCO FORZADO - SIN BACKGROUND-GRAY */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.5;
            color: var(--primary-black) !important;
            background-color: #ffffff !important;
            background: #ffffff !important;
            font-weight: 400;
            overflow-x: hidden;
        }

        /* iOS/mobile safety: evitar cualquier desbordamiento horizontal */
        html { width: 100%; overflow-x: hidden; }
        img, video { max-width: 100%; height: auto; display: block; }

        /* Header flotante sobre imágenes */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            text-decoration: none;
            color: var(--primary-black);
        }

        .logo-image {
            width: 45px;
            height: 45px;
            object-fit: contain;
        }

        .logo-text {
            font-size: 1.3rem;
            font-weight: 600;
            letter-spacing: -0.5px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 3rem;
            align-items: center;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--secondary-gray);
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-menu a:hover,
        .nav-menu a.active {
            color: var(--charcoal);
        }

        /* Hero Section con imagen de fondo full */
        .hero {
            min-height: 100dvh; /* Mejor comportamiento en iOS Safari */
            height: 100vh;
            background: linear-gradient(var(--overlay-light), var(--overlay-light)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1752024246180_1.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            color: white;
        }

        .hero-content {
            max-width: 1200px;
            width: 100%;
            text-align: center;
            padding: 0 2rem;
            z-index: 2;
        }

        .hero-tagline {
            font-size: 0.9rem;
            color: white;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 2rem;
            font-weight: 500;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 300;
            line-height: 1.1;
            margin-bottom: 2rem;
            letter-spacing: -2px;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.8);
        }

        .hero-description {
            font-size: 1.3rem;
            margin-bottom: 3rem;
            line-height: 1.6;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            opacity: 1;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
        }

        .hero-actions {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 1.2rem 2.5rem;
            font-size: 0.95rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .btn-primary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 1.2rem 2.5rem;
            font-size: 0.95rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .btn-secondary:hover {
            background: white;
            color: var(--primary-black);
        }

        /* Navigation Grid SIN ESPACIOS GRISES - CON FUNCIONALIDAD MEJORADA */
        .nav-grid {
            padding: 0;
            background: transparent;
            margin: 0;
        }

        .nav-container-grid {
            max-width: 100%;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0; /* Sin espacios entre imágenes */
            /* Altura fija eliminada para evitar recortes */
            height: auto;
            overflow: hidden; /* Previene desbordes en móvil */
        }

        .nav-item {
            /* Altura relativa a su contenido para evitar recortes */
            min-height: 320px;
            padding: 0;
            text-align: left;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-start; /* ALINEACIÓN VERTICAL DESDE ARRIBA */
            background-size: cover;
            background-position: center;
            margin: 0;
            cursor: pointer; /* Añadido cursor pointer para indicar clickeable */
        }

        /* IMÁGENES VIBRANTES CON OVERLAY MÁS SUAVE */
        .nav-item:nth-child(1) {
            background: linear-gradient(var(--overlay-nav), var(--overlay-nav)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756150801258_0.jpeg');
            background-size: cover;
            background-position: center;
        }

        .nav-item:nth-child(2) {
            background: linear-gradient(var(--overlay-nav), var(--overlay-nav)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756150948654_0.jpeg');
            background-size: cover;
            background-position: center;
        }

        .nav-item:nth-child(3) {
            background: linear-gradient(var(--overlay-nav), var(--overlay-nav)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1758681343770_0.png');
            background-size: cover;
            background-position: center;
        }

        .nav-item:nth-child(4) {
            background: linear-gradient(var(--overlay-nav), var(--overlay-nav)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756150760004_0.jpeg');
            background-size: cover;
            background-position: center;
        }

        .nav-item:hover {
            transform: scale(1.02);
        }

        .nav-item:hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(51, 51, 51, 0.05);
            z-index: 1;
        }

        /* 🎯 MODAL DE ANIMACIÓN CON LOGO CASA NUVERA */
        .property-loading-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%; /* Evita issues con 100vw en iOS */
            height: 100dvh; /* Usa viewport dinámico en navegadores modernos */
            min-height: 100vh; /* Fallback */
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .property-loading-modal.active {
            display: flex;
            opacity: 1;
        }

        .loading-logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
        }

        .loading-logo {
            width: 120px;
            height: 120px;
            object-fit: contain;
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-black);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .loading-subtitle {
            font-size: 1rem;
            color: var(--secondary-gray);
            margin-bottom: 2rem;
        }

        .loading-spinner-custom {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid var(--charcoal);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .nav-item-content {
            position: relative;
            z-index: 2;
            width: 100%;
            padding: 3rem;
            padding-top: 4rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 1rem;
            background: none;
            /* Evitar forzar altura mínima que cause recortes */
            min-height: 0;
        }

        .nav-item-label {
            font-size: 0.8rem;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0;
            font-weight: 600;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9), 0 0 15px rgba(0, 0, 0, 0.7);
            background: none;
            padding: 0.5rem 0;
            display: inline-block;
            width: fit-content;
            align-self: flex-start;
        }

        .nav-item h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
            color: #ffffff;
            line-height: 1.2;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9), 0 0 15px rgba(0, 0, 0, 0.7);
            background: none;
            padding: 0.5rem 0;
            width: 100%;
            align-self: stretch;
        }

        .nav-item p {
            color: #ffffff;
            line-height: 1.6;
            margin: 0;
            font-size: 0.9rem;
            font-weight: 500;
            background: rgba(0, 0, 0, 0.3);
            padding: 14px 18px;
            border-radius: 8px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: fit-content;
            align-self: flex-start;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
        }

        .nav-item-feature {
            background: none;
            padding: 1rem 0;
            border-radius: 0;
            backdrop-filter: none;
            border: none;
            margin: 0;
            width: 100%;
            align-self: stretch;
        }

        .nav-item-feature h4 {
            font-size: 1rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9), 0 0 15px rgba(0, 0, 0, 0.7);
            background: none;
            padding: 0;
        }

        .nav-item-feature p {
            font-size: 0.85rem;
            color: #ffffff;
            line-height: 1.4;
            margin: 0;
            font-weight: 500;
            background: rgba(0, 0, 0, 0.3);
            padding: 14px 18px;
            border-radius: 8px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: fit-content;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
        }

        .nav-item-link {
            color: #ffffff;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.4);
            padding: 14px 18px;
            border-radius: 8px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: inline-block;
            width: fit-content;
            transition: all 0.3s ease;
            margin-top: auto;
            align-self: flex-start;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.8);
            text-decoration: none;
        }

        .nav-item-link:hover {
            background: rgba(0, 0, 0, 0.5);
            border-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* 🔄 Nueva Era Section - ESTILO HERO COMPLETO CON IMAGEN DE FONDO */
        .new-era-section {
            padding: 5rem 2rem !important;
            background: linear-gradient(var(--overlay-light), var(--overlay-light)), 
                        url('https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756397254249_0.jpeg') !important;
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            color: white !important;
        }

        .new-era-container {
            max-width: 800px !important;
            margin: 0 auto !important;
            text-align: center !important;
            /* Eliminado: grid de 2 columnas */
        }

        /* .new-era-content sin grid, centrado mediante contenedor */

        .new-era-content h2 {
            font-size: 4rem !important;
            font-weight: 300 !important;
            line-height: 1.1 !important;
            margin-bottom: 2rem !important;
            color: white !important;
            letter-spacing: -2px !important;
            text-align: center !important;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.8) !important;
        }

        .new-era-content h3 {
            font-size: 1.3rem !important;
            font-weight: 400 !important;
            margin-bottom: 3rem !important;
            color: white !important;
            line-height: 1.6 !important;
            max-width: 800px !important;
            margin-left: auto !important;
            margin-right: auto !important;
            text-align: center !important;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7) !important;
        }

        .new-era-content p {
            font-size: 1.3rem !important;
            color: white !important;
            margin-bottom: 2rem !important;
            line-height: 1.6 !important;
            max-width: 800px !important;
            margin-left: auto !important;
            margin-right: auto !important;
            text-align: center !important;
            opacity: 1 !important;
            text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7) !important;
        }

        /* 🚨 SECCIÓN PROPIEDADES - ESPACIADO REDUCIDO */
        .properties-section {
            padding: 2rem 2rem 1rem 2rem !important;
            background: #ffffff !important;
            background-color: #ffffff !important;
            color: var(--primary-black) !important;
        }

        .properties-container {
            max-width: 1400px;
            margin: 0 auto;
            background: transparent !important;
        }

        .properties-header {
            text-align: center;
            margin-bottom: 4rem;
            background: transparent !important;
        }

        .properties-header h2 {
            font-size: 2.8rem !important;
            font-weight: 300 !important;
            margin-bottom: 2rem !important;
            color: var(--primary-black) !important;
            line-height: 1.2 !important;
            letter-spacing: -1px !important;
        }

        .properties-header p {
            font-size: 1.2rem !important;
            color: var(--secondary-gray) !important;
            margin-bottom: 2rem !important;
            line-height: 1.6 !important;
            max-width: 800px !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }

        /* BUSCADOR - FONDO GRIS CLARO SOBRE BLANCO */
        .property-search-bar {
            background: rgba(248, 248, 248, 1) !important;
            border-radius: 16px !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08) !important;
            padding: 2rem !important;
            margin-bottom: 3rem !important;
            border: 1px solid rgba(0, 0, 0, 0.05) !important;
        }

        .search-filters {
            display: grid !important;
            grid-template-columns: repeat(6, 1fr) !important;
            gap: 1rem !important;
            align-items: end !important;
            background: transparent !important;
        }

        .search-group {
            display: flex !important;
            flex-direction: column !important;
            background: transparent !important;
        }

        .search-select,
        .search-input {
            padding: 0.75rem !important;
            border: 1px solid #ddd !important;
            border-radius: 8px !important;
            font-size: 0.9rem !important;
            background: white !important;
            color: #333 !important;
            transition: border-color 0.3s ease !important;
        }

        .search-select:focus,
        .search-input:focus {
            outline: none !important;
            border-color: #333333 !important;
        }

        .search-checkbox-group {
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
            margin-top: 1.5rem !important;
            background: transparent !important;
        }

        .search-checkbox {
            width: 16px !important;
            height: 16px !important;
        }

        .search-checkbox-label {
            font-size: 0.9rem !important;
            color: #666 !important;
        }

        .search-btn {
            padding: 0.75rem 1.5rem !important;
            border: none !important;
            border-radius: 8px !important;
            font-size: 0.9rem !important;
            font-weight: 500 !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
        }

        .search-btn-primary {
            background: #333333 !important;
            color: white !important;
        }

        .search-btn-primary:hover {
            background: #000000 !important;
        }

        .search-btn-secondary {
            background: #6c757d !important;
            color: white !important;
        }

        .search-btn-secondary:hover {
            background: #545b62 !important;
        }

        .search-link {
            color: #333333 !important;
            text-decoration: none !important;
            font-size: 0.9rem !important;
            margin-top: 1rem !important;
            display: inline-block !important;
        }

        /* 🆕 GRID DE PROPIEDADES - DISEÑO IMAGEN 1 SIN BORDES */
        .properties-grid-container,
        #featuredProperties {
            display: grid !important;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)) !important;
            gap: 2rem !important;
            padding: 0 !important;
            background: transparent !important;
        }

        /* 🔥 CARDS SIN BORDES - EXACTAMENTE COMO IMAGEN 1 */
        .property-card {
            background: transparent !important; /* Sin fondo contenedor */
            border: none !important; /* SIN BORDER */
            border-radius: 0 !important; /* SIN BORDER-RADIUS */
            box-shadow: none !important; /* SIN BOX-SHADOW */
            overflow: visible !important;
            transition: all 0.3s ease !important;
            cursor: pointer !important;
            display: flex !important;
            flex-direction: column !important;
            position: relative !important;
        }

        .property-card:hover {
            transform: translateY(-2px) !important; /* Solo movimiento, sin sombra */
        }

        /* 🔥 IMAGEN PRINCIPAL - PEGADA AL FONDO */
        .property-image {
            height: 200px !important;
            position: relative !important;
            overflow: hidden !important;
            flex-shrink: 0 !important;
            border-radius: 0 !important; /* SIN BORDER-RADIUS */
            margin: 0 !important;
        }

        .property-image img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            transition: transform 0.3s ease !important;
            border-radius: 0 !important; /* SIN BORDER-RADIUS EN IMAGEN */
        }

        .property-card:hover .property-image img {
            transform: scale(1.03) !important;
        }

        /* PLACEHOLDER SI NO HAY IMAGEN */
        .no-image-placeholder {
            width: 100% !important;
            height: 100% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%) !important;
            color: #999 !important;
            font-size: 0.85rem !important;
            font-weight: 500 !important;
        }

        /* 🔥 CÍRCULO FAVORITOS - COMO IMAGEN 1 */
        .property-favorite {
            position: absolute !important;
            top: 12px !important;
            right: 12px !important;
            width: 32px !important;
            height: 32px !important;
            background: rgba(255, 255, 255, 0.9) !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            backdrop-filter: blur(10px) !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
            z-index: 5 !important;
        }

        .property-favorite:hover {
            background: white !important;
            transform: scale(1.1) !important;
        }

        .property-favorite.active {
            background: #e74c3c !important;
            color: white !important;
        }

        .property-favorite-icon {
            width: 16px !important;
            height: 16px !important;
            transition: all 0.2s ease !important;
        }

        /* 🔥 CONTENIDO SIN FONDO - PEGADO A LA IMAGEN */
        .property-content {
            padding: 1.5rem 0 !important; /* Sin padding lateral - pegado al fondo */
            background: transparent !important; /* SIN FONDO BLANCO */
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 0.75rem !important;
        }

        /* 🔥 TÍTULO - COMO IMAGEN 1 */
        .property-title {
            font-size: 1.1rem !important;
            font-weight: 600 !important;
            color: #333 !important;
            margin: 0 !important;
            line-height: 1.3 !important;
            overflow: visible !important;
            white-space: normal !important;
        }

        /* 🔥 UBICACIÓN - COMO IMAGEN 1 */
        .property-subtitle,
        .property-location {
            font-size: 0.85rem !important;
            color: #888 !important;
            margin: 0 !important;
            font-weight: 400 !important;
            display: flex !important;
            align-items: center !important;
            gap: 0.5rem !important;
        }

        /* 🔥 ICONOS HORIZONTALES VISIBLES - IMAGEN 1 */
        .property-features {
            display: flex !important;
            gap: 1.5rem !important;
            margin: 0.5rem 0 !important;
            align-items: center !important;
        }

        .property-feature {
            display: flex !important;
            align-items: center !important;
            gap: 0.4rem !important;
            font-size: 0.8rem !important;
            color: #666 !important;
            font-weight: 500 !important;
        }

        /* 🔥 ICONOS SVG VISIBLES Y CORRECTOS */
        .property-feature-icon {
            width: 16px !important;
            height: 16px !important;
            color: #666 !important;
            flex-shrink: 0 !important;
            fill: currentColor !important;
        }

        /* 🔥 PRECIO ALINEADO DERECHA - COMO IMAGEN 1 */
        .property-price-section {
            display: flex !important;
            justify-content: flex-end !important;
            align-items: center !important;
            margin-top: auto !important;
            padding-top: 0.5rem !important;
            border-top: 1px solid #f0f0f0 !important;
        }

        .property-price-badge,
        .property-price {
            font-size: 1.1rem !important;
            font-weight: 700 !important;
            color: #333 !important;
            background: none !important;
            padding: 0 !important;
            border-radius: 0 !important;
            position: static !important;
            box-shadow: none !important;
        }

        /* BADGE DESTACADA SUPERIOR */
        .featured-badge,
        .property-featured-badge {
            position: absolute !important;
            top: 12px !important;
            left: 12px !important;
            background: linear-gradient(135deg, #333333, #000000) !important;
            color: white !important;
            padding: 6px 10px !important;
            border-radius: 6px !important;
            font-size: 0.75rem !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
            z-index: 2 !important;
        }

        /* Loading States para fondo blanco */
        .loading-container {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            padding: 4rem 2rem !important;
            text-align: center !important;
            color: var(--secondary-gray) !important;
            min-height: 200px !important;
            background: transparent !important;
        }

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1) !important;
            border-top: 4px solid var(--secondary-gray) !important;
            border-radius: 50% !important;
            width: 40px !important;
            height: 40px !important;
            animation: spin 1s linear infinite !important;
            margin-bottom: 1rem !important;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 🎨 GALERÍA - ESPACIADO REDUCIDO */
        .gallery-section {
            padding: 1rem 2rem 2rem 2rem !important;
            background: #ffffff !important;
            background-color: #ffffff !important;
            color: var(--primary-black) !important;
        }

        .gallery-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .gallery-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .gallery-header h2 {
            font-size: 2.8rem !important;
            font-weight: 300 !important;
            margin-bottom: 2rem !important;
            color: var(--primary-black) !important;
            line-height: 1.2 !important;
            letter-spacing: -1px !important;
        }

        .gallery-header p {
            font-size: 1.2rem !important;
            color: var(--secondary-gray) !important;
            margin-bottom: 2rem !important;
            line-height: 1.6 !important;
            max-width: 800px !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }

        /* 🆕 CARRUSEL CLICKEABLE - CURSOR POINTER MEJORADO */
        .gallery-carousel {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.1);
            cursor: pointer; /* Cursor pointer en todo el carrusel */
        }

        .gallery-slides-container {
            position: relative;
            width: 100%;
            height: 600px;
            overflow: hidden;
            will-change: transform; /* suaviza en iOS */
        }

        .gallery-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer; /* 🆕 Cursor pointer en cada slide */
        }

        .gallery-slide.active {
            opacity: 1;
        }

        .gallery-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* ESTILOS PARA VIDEOS */
        .gallery-slide video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .video-slide {
            background: #000; /* Fondo negro para videos */
        }

        .slide-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            color: white;
            padding: 3rem 2rem 2rem;
            text-align: left;
            /* 🆕 Prevenir que overlay interfiera con clicks */
            pointer-events: none;
        }

        .slide-overlay h3 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);
        }

        .slide-overlay p {
            font-size: 1rem;
            opacity: 0.9;
            margin: 0;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.6);
        }

        /* CONTROLES DE NAVEGACIÓN */
        .gallery-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            color: var(--primary-black);
            font-size: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            font-weight: 300;
        }

        .gallery-nav-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        .prev-btn {
            left: 2rem;
        }

        .next-btn {
            right: 2rem;
        }

        /* INDICADORES */
        .gallery-indicators {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            z-index: 10;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .indicator.active,
        .indicator:hover {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Stats Section - ESPACIADO REDUCIDO */
        .stats-section {
            padding: 5rem 2rem;
            background: linear-gradient(var(--overlay-dark), var(--overlay-dark)), 
                        url('https://images.unsplash.com/photo-1600607687920-4e2a09cf159d?w=1920&h=1080&fit=crop&crop=center');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
        }

        /* Contact Section - ESPACIADO REDUCIDO */
        .contact-section {
            padding: 5rem 2rem;
            background: linear-gradient(var(--overlay-dark), var(--overlay-dark)), 
                        url('https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=1920&h=1080&fit=crop&crop=center');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
        }

        .contact-container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .contact-container h2 {
            font-size: 2.8rem;
            font-weight: 300;
            margin-bottom: 2rem;
            color: white;
        }

        .contact-container p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 4rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(160px, 1fr));
            justify-content: center;
            align-items: stretch;
            gap: 1.25rem;
        }

        .contact-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            padding: 0.8rem 1rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            display: block;
            width: 100%;
        }

        .contact-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--elegant-black);
            transform: translateY(-2px);
        }

        .contact-item h4 {
            font-size: 0.7rem;
            margin-bottom: 0.3rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--elegant-black);
        }

        .contact-item a {
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-size: 0.8rem;
        }

        .contact-item p {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            letter-spacing: 0.5px;
            font-size: 0.8rem;
            margin: 0.1rem 0;
            line-height: 1.2;
        }

        /* 🎨 FOOTER BLANCO/BEIGE - NUEVO TEMA CLARO */
        .footer {
            background: #f8f9fa !important;
            background-color: #f8f9fa !important;
            padding: 4rem 2rem 2rem;
            color: var(--primary-black);
            border-top: 1px solid #e9ecef;
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h4 {
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
            color: var(--primary-black);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.8rem;
        }

        .footer-section ul li a {
            color: var(--secondary-gray);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: var(--primary-black);
        }

        .footer-bottom {
            border-top: 1px solid #e9ecef;
            padding-top: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--secondary-gray);
            font-size: 0.9rem;
        }

        .footer-tagline {
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary-black);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-toggle {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 40px;
                height: 40px;
                font-size: 1.25rem;
                border: 1px solid rgba(0,0,0,0.1);
                border-radius: 8px;
                background: rgba(255,255,255,0.9);
                color: var(--primary-black);
                cursor: pointer;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 72px;
                left: 0;
                right: 0;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                padding: 1rem 2rem;
                border-bottom: 1px solid rgba(0,0,0,0.06);
                flex-direction: column;
                gap: 1rem;
                z-index: 1001;
            }

            .header.open .nav-menu {
                display: flex;
            }

            .hero h1 {
                font-size: 2.25rem;
                line-height: 1.15;
                word-break: break-word;
            }

            .new-era-content h2 {
                font-size: 2.25rem !important;
                line-height: 1.15 !important;
            }

            /* Botones del hero en una columna y tamaño táctil cómodo */
            .hero-actions {
                display: grid;
                grid-template-columns: 1fr;
                gap: 0.75rem;
                justify-items: center;
            }
            .btn-primary,
            .btn-secondary {
                width: 100%;
                max-width: 320px;
                padding: 0.9rem 1.25rem;
                font-size: 1rem;
                text-align: center;
            }

            .nav-container-grid {
                grid-template-columns: 1fr;
                height: auto;
            }

            .nav-item {
                min-height: 300px;
            }

            .nav-item-content {
                padding: 2rem;
                min-height: 0;
            }

            .search-filters {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
                align-items: stretch !important;
            }

            /* Evitar zoom en iOS al enfocar (>=16px) */
            .search-select,
            .search-input {
                font-size: 16px !important;
                width: 100% !important;
                min-width: 0 !important;
            }

            .search-btn {
                width: 100% !important;
            }

            .property-search-bar {
                padding: 1rem !important;
            }

            .properties-grid-container,
            #featuredProperties {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .property-card {
                margin: 0 auto;
                max-width: 350px;
            }

            .property-image {
                height: 200px !important;
            }

            .property-content {
                padding: 1.5rem 0 !important;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 1rem;
            }

            .hero {
                background-attachment: scroll;
            }

            .new-era-section,
            .stats-section,
            .properties-section,
            .contact-section {
                background-attachment: scroll;
            }

            /* RESPONSIVE CARRUSEL */
            .gallery-carousel {
                border-radius: 16px;
            }
            
            .gallery-slides-container {
                height: clamp(300px, 60vh, 420px);
            }
            
            .gallery-nav-btn {
                width: 44px;
                height: 44px;
                font-size: 1.25rem;
            }
            
            .prev-btn {
                left: 1rem;
            }
            
            .next-btn {
                right: 1rem;
            }
            
            .slide-overlay {
                padding: 2rem 1.5rem 1.5rem;
            }
            
            .slide-overlay h3 {
                font-size: 1.25rem;
            }
            
            .slide-overlay p {
                font-size: 0.9rem;
            }
        }

        /* Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeIn 0.8s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .parallax {
            background-attachment: fixed;
        }
        
        /* iOS Safari: evitar fondos en blanco con background-attachment: fixed */
        @supports (-webkit-touch-callout: none) {
            .hero,
            .parallax {
                background-attachment: scroll !important;
            }
        }

        /* Refuerzo en móviles: deshabilitar parallax fijo */
        @media (max-width: 768px) {
            .parallax { background-attachment: scroll !important; }
        }
    </style>
</head>
<body>
    <!-- 🎯 MODAL DE ANIMACIÓN CON LOGO -->
    <div class="property-loading-modal" id="propertyLoadingModal">
        <div class="loading-logo-container">
            <img src="https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1752020935606_0.png" alt="Casa Nuvera Logo" class="loading-logo">
            <div class="loading-text">Casa Nuvera</div>
            <div class="loading-subtitle">Cargando propiedad...</div>
            <div class="loading-spinner-custom"></div>
        </div>
    </div>

    <!-- Header flotante -->
    <header class="header">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <img src="https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1752020935606_0.png" 
                     alt="Casa Nuvera Logo" 
                     class="logo-image">
                <span class="logo-text">Casa Nuvera</span>
            </a>
            <button class="nav-toggle" id="navToggle" aria-label="Abrir menú" aria-expanded="false">☰</button>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html" class="active">Inicio</a></li>
                    <li><a href="compras.html">Comprar</a></li>
                    <li><a href="arriendos-nuevo.html">Arrendar</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero parallax">
        <div class="hero-content fade-in">
            <div class="hero-tagline">Casa Nuvera | Innovando el sector Inmobiliario | EST. 2025</div>
            <h1>descubramos juntos tu nuevo hogar</h1>
            <p class="hero-description">Somos una corredora Boutique Familiar, que nace con el fin de ampliar la visibilidad de propiedades con gran potencial en todo el gran Santiago. Nuestro trabajo se enmarca en brindar calidad en el servicio de corretaje, desde la funcionalidad, innovación y proyección de cada espacio que ofrecemos.</p>
            <div class="hero-actions">
                <a href="#propiedades" class="btn-primary">Explorar Propiedades</a>
                <a href="#contacto" class="btn-secondary">Contactar Ahora</a>
            </div>
        </div>
    </section>

    <!-- Navigation Grid CON FUNCIONALIDAD DE CLIC A PROPIEDADES -->
    <section class="nav-grid" id="servicios">
        <div class="nav-container-grid">
            <!-- CARD 1: Redirige a propiedad específica -->
            <div class="nav-item" onclick="navigateToProperty('1', 'departamento-las-condes')">
                <div class="nav-item-content">
                    <div class="nav-item-label">Compra</div>
                    <h3>Propiedades en Venta</h3>
                    <p>Casas y departamentos cuidadosamente seleccionados en las mejores ubicaciones de Santiago.</p>
                    <span class="nav-item-link">Explorar Propiedades →</span>
                </div>
            </div>

            <!-- CARD 2: Redirige a propiedad específica -->
            <div class="nav-item" onclick="navigateToProperty('2', 'casa-providencia')">
                <div class="nav-item-content">
                    <div class="nav-item-label">Servicios</div>
                    <h3>Asesoría Inmobiliaria</h3>
                    <p>Consultoría profesional y servicios integrales para maximizar tu inversión.</p>
                    <div class="nav-item-feature">
                        <h4>Apoyo integral</h4>
                        <p>Contamos con un equipo interdisciplinario que te acompañarán en todas las etapas de compra y venta.</p>
                    </div>
                    <span class="nav-item-link">Conocer Más →</span>
                </div>
            </div>

            <!-- CARD 3: Redirige a propiedad específica -->
            <div class="nav-item" onclick="navigateToProperty('3', 'oficina-vitacura')">
                <div class="nav-item-content">
                    <div class="nav-item-label">Vende</div>
                    <h3>Vende tu propiedad</h3>
                    <p>Te ayudamos a vender tu propiedad de manera rápida y al mejor precio del mercado.</p>
                    <span class="nav-item-link">Más información →</span>
                </div>
            </div>

            <!-- CARD 4: Redirige a propiedad específica -->
            <div class="nav-item" onclick="navigateToProperty('4', 'casa-nunoa')">
                <div class="nav-item-content">
                    <div class="nav-item-label">Información</div>
                    <h3>Conocer más</h3>
                    <p>Descubre cómo estamos redefiniendo el mercado inmobiliario con tecnología e innovación.</p>
                    <div class="nav-item-feature">
                        <h4>Experiencia digital</h4>
                        <p>Integramos la tecnología de hoy al sector inmobiliario, creando experiencias digitales que transforman la manera de encontrar tu nuevo hogar.</p>
                    </div>
                    <span class="nav-item-link">Ver más →</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 🔄 Nueva Era Section - ESTILO HERO CON IMAGEN DE FONDO -->
    <section class="new-era-section parallax" id="redefiniendo">
        <div class="new-era-container">
            <div class="new-era-content fade-in">
                <h2>La nueva era de lo inmobiliario comienza aquí</h2>
                <h3>Revolucionando la manera de encontrar tu hogar</h3>
                <p>Porque entendemos que la tarea de encontrar tu próximo hogar es difícil, ya que implica tiempo y recursos. Acá en Casa Nuvera te brindamos las mejores herramientas para adquirir la propiedad que anhelas.</p>
            </div>
        </div>
    </section>

    <!-- Properties Section - PROPIEDADES REALES CON REDIRECCIÓN -->
    <section class="properties-section" id="propiedades">
        <div class="properties-container">
            <div class="properties-header fade-in">
                <h2>Encuentra tu próximo hogar</h2>
                <p>Explora nuestra selección de propiedades disponibles en las mejores ubicaciones de Santiago.</p>
            </div>

            <!-- Buscador de Propiedades -->
            <div class="property-search-bar fade-in">
                <div class="search-filters">
                    <div class="search-group">
                        <select class="search-select" id="operation-filter">
                            <option value="">Venta</option>
                            <option value="venta">Venta</option>
                            <option value="arriendo">Arriendo</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <select class="search-select" id="type-filter">
                            <option value="">Departamentos</option>
                            <option value="Casa">Casa</option>
                            <option value="Departamento">Departamento</option>
                            <option value="Oficina">Oficina</option>
                        </select>
                    </div>
                    <div class="search-group">
                        <input type="text" class="search-input" placeholder="Ingresa comuna o ciudad" id="location-filter">
                    </div>
                    <div class="search-group">
                        <div class="search-checkbox-group">
                            <input type="checkbox" class="search-checkbox" id="projects-filter">
                            <label for="projects-filter" class="search-checkbox-label">Proyectos</label>
                        </div>
                    </div>
                    <div class="search-group">
                        <button class="search-btn search-btn-primary" onclick="searchProperties()">Buscar</button>
                    </div>
                    <div class="search-group">
                        <button class="search-btn search-btn-secondary">Buscar en Mapa</button>
                    </div>
                </div>
                <a href="#" class="search-link">Buscar por código de propiedad</a>
            </div>
            
            <!-- 🎯 Grid de Propiedades REALES - Se carga desde property-loader-fixed.js -->
            <div id="featuredProperties">
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <p>Cargando propiedades reales desde Supabase...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 🎬 GALERÍA MIXTA: Imágenes + Videos CON FUNCIONALIDAD CLICKEABLE -->
    <section class="gallery-section">
        <div class="gallery-container">
            <div class="gallery-header">
                <h2>Galería de Experiencias</h2>
                <p>Descubre a través de imágenes y videos la calidad y belleza de nuestras propiedades</p>
            </div>
            
            <div class="gallery-carousel" onclick="handleCarouselClick()">
                <div class="gallery-slides-container">
                    <!-- 🆕 SLIDE 1: IMAGEN CLICKEABLE → Propiedad 1 -->
                    <div class="gallery-slide active" data-property="1" data-slug="departamento-los-llanes">
                        <img src="https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756150801258_0.jpeg" alt="Experiencia 1">
                        <div class="slide-overlay">
                            <h3>Espacios que Inspiran</h3>
                            <p>Cada propiedad cuenta una historia única</p>
                        </div>
                    </div>
                    
                    <!-- 🆕 SLIDE 2: VIDEO CLICKEABLE → Propiedad 2 -->
                    <div class="gallery-slide video-slide" data-property="2" data-slug="casa-moderna-providencia">
                        <video autoplay muted loop>
                            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" type="video/mp4">
                            Tu navegador no soporta videos HTML5.
                        </video>
                        <div class="slide-overlay">
                            <h3>Tour Virtual Inmersivo</h3>
                            <p>Recorre propiedades desde la comodidad de tu hogar</p>
                        </div>
                    </div>
                    
                    <!-- 🆕 SLIDE 3: IMAGEN CLICKEABLE → Propiedad 3 -->
                    <div class="gallery-slide" data-property="3" data-slug="oficina-vitacura">
                        <img src="https://otfbouzmhmmguvqbbwku.supabase.co/storage/v1/object/public/imagenes-sitio/imagen_1756150948654_0.jpeg" alt="Experiencia 3">
                        <div class="slide-overlay">
                            <h3>Calidad en Cada Detalle</h3>
                            <p>Propiedades seleccionadas con los más altos estándares</p>
                        </div>
                    </div>
                    
                    <!-- 🆕 SLIDE 4: VIDEO CLICKEABLE → Propiedad 4 -->
                    <div class="gallery-slide video-slide" data-property="4" data-slug="casa-familiar-nunoa">
                        <video autoplay muted loop>
                            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
                        </video>
                        <div class="slide-overlay">
                            <h3>Tecnología de Vanguardia</h3>
                            <p>Innovación aplicada al sector inmobiliario</p>
                        </div>
                    </div>
                </div>
                
                <!-- Controles de navegación -->
                <button class="gallery-nav-btn prev-btn" onclick="previousSlide(); event.stopPropagation();">‹</button>
                <button class="gallery-nav-btn next-btn" onclick="nextSlide(); event.stopPropagation();">›</button>
                
                <!-- Indicadores -->
                <div class="gallery-indicators">
                    <span class="indicator active" data-slide="0" onclick="showSlide(0); event.stopPropagation();"></span>
                    <span class="indicator" data-slide="1" onclick="showSlide(1); event.stopPropagation();"></span>
                    <span class="indicator" data-slide="2" onclick="showSlide(2); event.stopPropagation();"></span>
                    <span class="indicator" data-slide="3" onclick="showSlide(3); event.stopPropagation();"></span>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section parallax"></section>

    <!-- Contact Section -->
    <section class="contact-section parallax" id="contacto">
        <div class="contact-container">
            <h2 class="fade-in">¿Listo para encontrar tu próximo hogar?</h2>
            <p class="fade-in">Nuestro equipo está aquí para ayudar en cada paso del proceso. Desde la búsqueda inicial hasta la inscripción de la propiedad a tu nombre.</p>
            
            <div class="contact-grid">
                <div class="contact-item fade-in">
                    <h4>Teléfono</h4>
                    <p><a href="tel:+56977944695">+569 77944695</a></p>
                </div>
                <div class="contact-item fade-in">
                    <h4>Email</h4>
                    <p><a href="mailto:Contacto@casanuvera.cl">Contacto@casanuvera.cl</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- 🎨 FOOTER BLANCO/BEIGE - NUEVO DISEÑO LIMPIO -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Propiedades</h4>
                    <ul>
                        <li><a href="#propiedades">Hogares para descubrir</a></li>
                        <li><a href="#propiedades">Encuentra propiedades en venta cuidadosamente seleccionadas en el gran Santiago</a></li>
                        <li><a href="#servicios">Tasaciones</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Soporte</h4>
                    <ul>
                        <li><a href="#contacto">Contacto</a></li>
                        <li><a href="admin-login.html">Gestionar Contenido</a></li>
                        <li><a href="#" onclick="alert('Próximamente: Términos y condiciones')">Términos</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <ul>
                        <li><a href="mailto:Contacto@casanuvera.cl">Contacto@casanuvera.cl</a></li>
                        <li><a href="tel:+56977944695">+569 77944695</a></li>
                        <li>Santiago, Chile</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-tagline">Casa Nuvera | Innovando el sector Inmobiliario | EST. 2025</div>
                <div>&copy; 2025 Casa Nuvera. Todos los derechos reservados.</div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="supabase.js"></script>
    <script src="property-handler.js"></script>
    <script src="property-loader-fixed.js"></script>
    <script src="whatsapp-widget.js"></script>

    <script>
        // 🔥 FUNCIÓN FAVORITOS UNIFICADA - IMAGEN 1
        function toggleFavorite(propertyId, event) {
            event.stopPropagation(); // Evitar que se ejecute el onclick de la card
            
            const favoriteBtn = document.getElementById(`fav_${propertyId}`);
            const isActive = favoriteBtn.classList.contains('active');
            
            if (isActive) {
                favoriteBtn.classList.remove('active');
                console.log(`❤️ Removido de favoritos: ${propertyId}`);
                // Aquí puedes agregar lógica para remover de localStorage o API
            } else {
                favoriteBtn.classList.add('active');
                console.log(`💖 Agregado a favoritos: ${propertyId}`);
                // Aquí puedes agregar lógica para guardar en localStorage o API
            }
        }

        // 🎯 FUNCIONALIDAD DE NAVEGACIÓN A PROPIEDADES CON ANIMACIÓN
        function navigateToProperty(propertyId, slug) {
            console.log(`🎯 Navegando a propiedad ID: ${propertyId}, Slug: ${slug}`);
            
            // Mostrar modal de animación INMEDIATAMENTE
            const modal = document.getElementById('propertyLoadingModal');
            modal.classList.add('active');
            
            // Redirigir inmediatamente - la pantalla de carga se mantendrá en property-detail.html
            const url = `property-detail.html?id=${propertyId}&slug=${slug}`;
            window.location.href = url;
        }

        // 🎯 JAVASCRIPT DEL CARRUSEL MIXTO - AUTOPLAY Y CONTROLES
        let currentSlide = 0;
        let autoplayInterval;
        const totalSlides = 4;

        function showSlide(index) {
            const slides = document.querySelectorAll('.gallery-slide');
            const indicators = document.querySelectorAll('.indicator');
            
            // Remover active de todos
            slides.forEach(slide => slide.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));
            
            // Activar slide e indicador actual
            if (slides[index]) {
                slides[index].classList.add('active');
            }
            if (indicators[index]) {
                indicators[index].classList.add('active');
            }
            
            currentSlide = index;
        }

        function nextSlide() {
            const nextIndex = (currentSlide + 1) % totalSlides;
            showSlide(nextIndex);
        }

        function previousSlide() {
            const prevIndex = (currentSlide - 1 + totalSlides) % totalSlides;
            showSlide(prevIndex);
        }

        // 🆕 FUNCIONALIDAD CLICKEABLE DEL CARRUSEL
        function handleCarouselClick() {
            const activeSlide = document.querySelector('.gallery-slide.active');
            if (activeSlide) {
                const propertyId = activeSlide.dataset.property;
                const slug = activeSlide.dataset.slug;
                
                if (propertyId && slug) {
                    console.log(`🖼️ Click en carrusel - Navegando a propiedad ID: ${propertyId}, Slug: ${slug}`);
                    navigateToProperty(propertyId, slug);
                } else {
                    console.warn('⚠️ Slide sin datos de propiedad');
                }
            }
        }

        // AUTOPLAY AUTOMÁTICO
        function startAutoplay() {
            autoplayInterval = setInterval(nextSlide, 4000); // Cambio cada 4 segundos
        }

        function stopAutoplay() {
            if (autoplayInterval) {
                clearInterval(autoplayInterval);
            }
        }

        // 🎯 FUNCIÓN DE BÚSQUEDA CONECTADA AL SISTEMA REAL
        function searchProperties() {
            const operation = document.getElementById('operation-filter').value;
            const type = document.getElementById('type-filter').value;
            const location = document.getElementById('location-filter').value;
            const projects = document.getElementById('projects-filter').checked;
            
            console.log('🔍 Filtros de búsqueda aplicados:', { operation, type, location, projects });
            
            // Usar el PropertyLoader real para aplicar filtros
            if (window.propertyLoader) {
                window.propertyLoader.applySearchFilters({
                    operation,
                    type,
                    location,
                    projects
                });
            } else {
                console.warn('⚠️ PropertyLoader no está disponible aún - esperando conexión a Supabase');
            }
        }

        // 🔥 RENDERIZADO DE PROPERTY CARD - EXACTAMENTE IMAGEN 1 CON ICONOS SVG
        window.renderPropertyCard = function(property) {
            const imageUrl = property.fotos && property.fotos.length > 0 
                ? property.fotos[0] 
                : null;
            
            const imageHTML = imageUrl 
                ? `<img src="${imageUrl}" alt="${property.titulo}" loading="lazy">` 
                : `<div class="no-image-placeholder">Imagen no disponible</div>`;
            
            return `
                <div class="property-card" onclick="navigateToProperty('${property.id}', '${property.slug || 'property'}')">
                    <!-- 🔥 IMAGEN SIN BORDES -->
                    <div class="property-image">
                        ${imageHTML}
                        
                        <!-- 🔥 CÍRCULO FAVORITOS BLANCO -->
                        <button class="property-favorite" id="fav_${property.id}" onclick="toggleFavorite('${property.id}', event)" aria-label="Agregar a favoritos">
                            <svg class="property-favorite-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                        </button>
                    </div>
                    
                    <!-- 🔥 CONTENIDO SIN FONDO - PEGADO -->
                    <div class="property-content">
                        <!-- 🔥 TÍTULO -->
                        <h3 class="property-title">${property.titulo}</h3>
                        
                        <!-- 🔥 UBICACIÓN -->
                        <p class="property-location">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            ${property.comuna}, ${property.region}
                        </p>
                        
                        <!-- 🔥 ICONOS HORIZONTALES VISIBLES - CAMA, DUCHA, METROS -->
                        <div class="property-features">
                            <div class="property-feature">
                                <svg class="property-feature-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M7 14c1.66 0 3-1.34 3-3S8.66 8 7 8s-3 1.34-3 3 1.34 3 3 3zm0-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12-3h-8v8H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"/>
                                </svg>
                                ${property.dormitorios || 0} hab
                            </div>
                            <div class="property-feature">
                                <svg class="property-feature-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4zm2.5 2.25l1.25-2.75-6-6-3.5 3.5-4.5-4.5L1 12.75l6.5 6.5 3.5-3.5 6 6z"/>
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM7.07 18.28c.43-.9 3.05-.99 4.93-.99s4.51.09 4.93.99c-.73 1.13-1.87 2.02-3.21 2.53C12.75 21.27 11.25 21.27 10.28 20.81c-1.34-.51-2.48-1.4-3.21-2.53z"/>
                                </svg>
                                ${property.banos || 0} baños
                            </div>
                            <div class="property-feature">
                                <svg class="property-feature-icon" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 18H4V4h16v16z"/>
                                    <path d="M6 10h2v2H6zm0 4h2v2H6zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"/>
                                </svg>
                                ${property.superficie_util || property.superficie_total || 0} m²
                            </div>
                        </div>
                        
                        <!-- 🔥 PRECIO ALINEADO DERECHA -->
                        <div class="property-price-section">
                            <span class="property-price">
                                ${property.precio ? `${parseFloat(property.precio).toLocaleString()} UF` : 'Consultar'}
                            </span>
                        </div>
                    </div>
                </div>
            `;
        };

        // 🚨 SOLO MANEJO DE EVENTOS - SIN CARGA DE PROPIEDADES MOCKUP
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🏠 Página cargada - PropertyLoader real se iniciará automáticamente');
            console.log('⚡ Scripts cargados: supabase.js, property-handler.js, property-loader-fixed.js');
            
            // INICIALIZAR CARRUSEL
            // Configurar indicadores ya tienen onclick en HTML
            
            // Pausar en hover
            const carousel = document.querySelector('.gallery-carousel');
            if (carousel) {
                carousel.addEventListener('mouseenter', stopAutoplay);
                carousel.addEventListener('mouseleave', startAutoplay);
            }
            
            // Iniciar autoplay del carrusel
            startAutoplay();
            
            // El property-loader-fixed.js se encarga de cargar las propiedades reales
        });

        // Animations on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationDelay = Math.random() * 0.5 + 's';
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
                // Cerrar menú móvil si está abierto
                const headerEl = document.querySelector('.header');
                if (headerEl && headerEl.classList.contains('open')) {
                    headerEl.classList.remove('open');
                    const toggleBtn = document.getElementById('navToggle');
                    if (toggleBtn) toggleBtn.setAttribute('aria-expanded', 'false');
                }
            });
        });

        // Parallax effect
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.parallax');
            
            parallaxElements.forEach(element => {
                const speed = 0.5;
                const yPos = -(scrolled * speed);
                element.style.backgroundPosition = `center ${yPos}px`;
            });
        });

        // Navegación móvil: toggle hamburguesa
        const navToggle = document.getElementById('navToggle');
        if (navToggle) {
            navToggle.addEventListener('click', () => {
                const headerEl = document.querySelector('.header');
                const expanded = navToggle.getAttribute('aria-expanded') === 'true';
                navToggle.setAttribute('aria-expanded', (!expanded).toString());
                headerEl.classList.toggle('open');
            });
        }
    </script>
</body>
</html>
